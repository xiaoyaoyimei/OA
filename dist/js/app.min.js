angular.module("app.templates",["partials/common/404.html","partials/home/profile.html","partials/login/login.html","partials/login/register.html","partials/products/category.html","partials/products/product.html","partials/sell/choose-member.html","partials/sell/new.html"]),angular.module("partials/common/404.html",[]).run(["$templateCache",function(a){a.put("partials/common/404.html",'<div style="width:200px; margin: 100px auto; text-align: center;">\n	<h3 style="color: #777; margin-bottom:15px;">\n		糟糕，没找到您要的页面！\n	</h3>\n</div>')}]),angular.module("partials/home/profile.html",[]).run(["$templateCache",function(a){a.put("partials/home/profile.html",'<div class="page page-profile">\n\n    <div class="row">\n        <div class="col-md-8 col-md-offset-2">\n\n            <div class="panel panel-profile">\n                <div class="panel-heading text-center bg-info">\n                    <img alt="" src="images/default-avatar.png" class="img-circle img80_80">\n                    <h3>赵铁柱</h3>\n                    <p>静安店</p>                    \n                </div>\n                <div class="list-justified-container">\n                    <ul class="list-justified text-center">\n                        <li>\n                            <p class="size-h3">100</p>\n                            <p class="text-muted">今日发展会员</p>\n                        </li>\n                        <li>\n                            <p class="size-h3">200</p>\n                            <p class="text-muted">今日销量</p>\n                        </li>\n                        <li>\n                            <p class="size-h3">4,000</p>\n                            <p class="text-muted">今日销售额</p>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n\n        </div>\n\n    </div> \n\n    <div class="row">\n        <div class="col-md-8 col-md-offset-2">\n           <div class="panel panel-default">\n                <div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> 用户信息</strong></div>\n                <div class="panel-body">\n                    <div class="media">\n                        <div class="media-body">\n                            <ul class="list-unstyled list-info">\n                                <li>\n                                    <span class="icon glyphicon glyphicon-user"></span>\n                                    <label>用户名</label>\n                                    赵铁柱\n                                </li>\n                                <li>\n                                    <span class="icon glyphicon glyphicon-barcode"></span>\n                                    <label>编号</label>\n                                    0001\n                                </li>\n                                <li>\n                                    <span class="icon glyphicon glyphicon-flag"></span>\n                                    <label>角色</label>\n                                    收银员\n                                </li>\n                                <li>\n                                    <span class="icon glyphicon glyphicon-home"></span>\n                                    <label>地址</label>\n                                    上海\n                                </li>\n                                <li>\n                                    <span class="icon glyphicon glyphicon-earphone"></span>\n                                    <label>联系电话</label>\n                                    (021）87654321\n                                </li>\n                            </ul>\n                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>')}]),angular.module("partials/login/login.html",[]).run(["$templateCache",function(a){a.put("partials/login/login.html",'<div style="position: absolute; left: 0; top: 0; height: 100%; width: 100%; z-index: 100; \n    opacity: 0.4; background-color: #000; color: #ec971f;" \n    ng-show="loading">\n    <div class="color-orange text-center" style="margin-top: 200px; width: 100%;">\n        <i class="fa fa-spinner fa-spin fa-3x" style="opacity: 1"></i>\n    </div>\n</div>\n\n <div class="page-signin">\n\n    <div class="signin-header">\n        <div class="container text-center">\n            <section class="logo">\n                <a href="#/">JUZED</a>\n            </section>\n        </div>\n    </div>\n\n    <div class="signin-body">\n        <div class="container">\n            <div class="form-container">\n\n                <form class="form-horizontal" ng-submit="login()">\n                    <fieldset>\n                        <div class="form-group">\n                            <div class="alert alert-danger" ng-show="errMsg">\n                                <button type="button" class="close" ng-click="errMsg = null">&times;</button>\n                                <strong>{{errMsg}}</strong>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <div class="input-group input-group-lg">\n                                <span class="input-group-addon">\n                                    <span class="glyphicon glyphicon-user"></span>\n                                </span>\n                                <input type="text"\n                                       class="form-control"\n                                       placeholder="用户名"\n                                       ng-model="userName"\n                                       >\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <div class="input-group input-group-lg">\n                                <span class="input-group-addon">\n                                    <span class="glyphicon glyphicon-lock"></span>\n                                </span>\n                                <input type="password"\n                                       class="form-control"\n                                       placeholder="密码"\n                                       ng-model="password"\n                                       >\n                            </div>\n                        </div>\n                        <div class="form-group">\n                        </div>\n                        <div class="form-group">\n                            <button type="submit" class="btn btn-primary btn-lg btn-block">\n                                登陆\n                            </button>\n                        </div>\n                    </fieldset>\n                </form>\n\n                <!--\n                <section>\n                    <p class="text-center"><a href="#/pages/forgot">忘记密码?</a></p>\n                    <p class="text-center text-muted text-small">没有账号? <a href="#/pages/signup">注册</a></p>\n                </section>\n                -->\n                \n            </div>\n        </div>\n    </div>\n\n    <hr>\n    <div class="text-center">\n        &copy;江苏太湖云计算信息技术股份有限公司\n    </div>\n\n</div>')}]),angular.module("partials/login/register.html",[]).run(["$templateCache",function(a){a.put("partials/login/register.html",'<div class="page">\n</div>')}]),angular.module("partials/products/category.html",[]).run(["$templateCache",function(a){a.put("partials/products/category.html",'<div class="page">\n	\n	<h2>分类管理</h2>\n\n</div>')}]),angular.module("partials/products/product.html",[]).run(["$templateCache",function(a){a.put("partials/products/product.html",'<div class="page">\n\n	<tabset>\n	    <tab heading="导入">\n	    	<div class="row search-wrapper" style="margin-top: 15px">\n				<div class="col-xs-12"> \n					<button class="btn btn-primary">\n						<i class="fa fa-file-excel-o"></i> 批量导入商品资料\n					</button>\n					<button class="btn btn-primary">\n						<i class="fa fa-file-photo-o"></i> 批量导入图片\n					</button>\n					<button class="btn btn-primary">\n						<i class="fa fa-file-excel-o"></i> 批量导入商品描述\n					</button>\n				</div>\n			</div>\n	    </tab>\n	    <tab>\n	      <tab-heading>\n	      	添加\n	      </tab-heading>\n	      添加商品\n	    </tab>\n	    <tab>\n	      <tab-heading>\n	      	查询\n	      </tab-heading>\n	      查询商品\n	    </tab>\n	     <tab>\n	      <tab-heading>\n	      	提交审核\n	      </tab-heading>\n	      	提交审核\n	    </tab>\n  	</tabset>\n\n</div>')}]),angular.module("partials/sell/choose-member.html",[]).run(["$templateCache",function(a){a.put("partials/sell/choose-member.html",'<!--\n<div class="modal-header">\n    <h4 class="modal-title">选择会员</h4>\n</div>\n-->\n\n<div class="modal-body" style="padding-bottom: 10px;">\n	<tabset>\n		<tab>\n			<tab-heading>\n				添加会员\n			</tab-heading>\n			<div style="padding-top:15px;">\n				<div class="form-group">\n					<div class="row">\n						<div class="col-sm-3 text-right">\n							<label><span style="color: red">*</span>手机</label>\n						</div>\n						<div class="col-sm-7">\n							<input class="form-control" type="text" placehoder="请输入手机号码"/>\n						</div>\n					</div>\n				</div>\n				<div class="form-group">\n					<div class="row">\n						<div class="col-sm-3 text-right">\n							<label>姓名</label>\n						</div>\n						<div class="col-sm-7">\n							<input class="form-control" type="text" placehoder="请输入姓名"/>\n						</div>\n					</div>\n				</div>\n				<div class="form-group">\n					<div class="row">\n						<div class="col-sm-3 text-right ">\n							<label>生日</label>\n						</div>\n						<div class="col-sm-7">\n							<input class="form-control" type="text"/>\n						</div>\n					</div>\n				</div>\n				<div class="form-group">\n					<div class="row">\n						<div class="col-sm-3 text-right">\n							<label>地址</label>\n						</div>\n						<div class="col-sm-7">\n							<input class="form-control" type="text" placehoder="请输入地址"/>\n						</div>\n					</div>\n				</div>\n	    	</div>\n		</tab>\n		<tab>\n			<tab-heading>\n				选择会员\n			</tab-heading>\n			<div class="row" style="margin-top: 10px; margin-bottom: 10px;">\n				<div class="col-sm-10">\n					<input type="text" class="form-control" placeholder="输入手机号或姓名"/>\n				</div>\n				<div class="col-sm-2">\n					<button class="btn btn-orange">\n						<i class="fa fa-search"></i> 查询\n					</button>\n				</div>\n			</div>\n			<table class="table table-hover">\n				<tr>\n					<th>\n						姓名\n					</th>    \n					<th>\n						电话\n					</th>\n					<th class="text-right">\n						积分\n					</th>\n					<th class="text-right">\n						消费次数\n					</th>\n					<th class="text-right">\n						上一次消费时间\n					</th>\n				</tr>\n				<tr>\n					<td>张三</td>\n					<td>13888888888</td>\n					<td class="text-right">100</td>\n					<td class="text-right">2</td>\n					<td class="text-right">2015-06-01</td>\n				</tr>\n				<tr>\n					<td>张三</td>\n					<td>13888888888</td>\n					<td class="text-right">1000</td>\n					<td class="text-right">2</td>\n					<td class="text-right">2015-06-01</td>\n				</tr>\n			</table>\n		</tab>\n  	</tabset>\n</div>\n<div class="modal-footer" style="margin-top: 0px;">\n	<div class="row">\n		<div class="col-xs-5">\n			 <button class="btn btn-default btn-action" ng-click="cancel()">取 消</button>\n		</div>\n		<div class="col-xs-2"></div>\n		<div class="col-xs-5">\n			<button class="btn btn-orange btn-action" ng-click="ok()">确 定</button>\n		</div>\n	</div>\n</div>')}]),angular.module("partials/sell/new.html",[]).run(["$templateCache",function(a){a.put("partials/sell/new.html",'<div class="page">\n\n	<div class="row">\n		<div class="col-sm-4">\n			<div class="panel panel-default">\n				<div class="panel-heading">\n					时间：{{dt | date: "yyyy-MM-dd HH:mm:ss"}}<br>\n					营业员：{{employee.name}}<br>\n					会员：{{member.name}} \n					<button class="btn btn-orange" ng-click="chooseMember()">\n						<i class="fa fa-user"></i> 选择会员\n					</button>\n				</div>\n				<div class="panel-body" style="min-height: 385px; padding-top: 0px;">\n					<table class="table table-hover table-noheader">\n						<tr>\n							<th>序号</th>\n							<th>商品</th>\n							<th>价格</th>\n							<th>数量</th>\n						</tr>\n						<tr ng-repeat="p in selectedProducts track by $index">\n							<td>{{p.seq}}</td>\n							<td>{{p.name}}</td>\n							<td>{{p.price}}</td>\n							<td>{{p.quantity}}</td>\n						</tr>\n					</table>\n				</div>\n				<div class="panel-footer">\n					<div class="row">\n						<div class="col-xs-6 text-left">\n							<h4>合计：{{calculateTotalPrice()}}</h4>\n						</div>\n						<div class="col-xs-6 text-right">\n							<button class="btn btn-lg btn-orange"><i class="fa fa-rmb"></i> 结算</button>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n		<div class="col-sm-8">\n			<div class="panel panel-default">\n				<div class="panel-body">\n\n					<!--\n					<div class="row">\n						<div class="col-sm-10">\n							<input type="text" class="form-control" placeholder="输入查询条件"/>\n						</div>\n						<div class="col-sm-2">\n							<button class="btn btn-warning">搜索</button>\n						</div>\n					</div>\n					-->\n\n					<tabset>\n						<tab ng-repeat="sc in shortcuts">\n							<tab-heading>\n								{{sc.category}}\n							</tab-heading>\n							<div class="shortcuts">\n						    	<button class="btn btn-warning btn-lg text-center" \n						    		ng-repeat="p in sc.products"\n						    		ng-click="addProduct(p)">\n						    		{{p.name}}<br>￥{{p.price}}\n						    	</button>\n					    	</div>\n						</tab>\n				  	</tabset>\n\n				</div>\n			</div>\n				\n		</div>\n	</div>\n\n</div>')}]),angular.module("app.config",[]).constant("config",{baseUrl:"http://127.0.0.1:8080/pos"}),angular.module("app.directives",[]).directive("toggleMinNav",["$rootScope",function(a){return{restrict:"A",link:function(b,c){var d,e,f,g,h,i;return h=$("#app"),f=$(window),e=$("#nav-container"),d=$("#content"),c.on("click",function(b){return h.hasClass("nav-min")?h.removeClass("nav-min"):(h.addClass("nav-min"),a.$broadcast("minNav:enabled")),b.preventDefault()}),g=void 0,i=function(){var a;return a=f.width(),768>a?h.removeClass("nav-min"):void 0},f.resize(function(){var a;return clearTimeout(a),a=setTimeout(i,300)})}}}]).directive("collapseNav",[function(){return{restrict:"A",link:function(a,b){var c,d,e,f,g;return e=b.find("ul").parent("li"),e.append('<i class="fa fa-caret-right icon-has-ul"></i>'),c=e.children("a"),f=b.children("li").not(e),d=f.children("a"),g=$("#app"),c.on("click",function(a){var b,c;return g.hasClass("nav-min")?!1:(c=$(this),b=c.parent("li"),e.not(b).removeClass("open").find("ul").slideUp(),b.toggleClass("open").find("ul").slideToggle(),a.preventDefault())}),d.on("click",function(){return e.removeClass("open").find("ul").slideUp()}),a.$on("minNav:enabled",function(){return e.removeClass("open").find("ul").slideUp()})}}}]).directive("highlightActive",[function(){return{restrict:"A",controller:["$scope","$element","$attrs","$location",function(a,b,c,d){var e,f,g;return f=b.find("a"),g=function(){return d.path()},e=function(a,b){return $("#app").removeClass("on-canvas"),b="#"+b,angular.forEach(a,function(a){var c,d,e;return d=angular.element(a),c=d.parent("li"),e=d.attr("href"),c.hasClass("active")&&c.removeClass("active"),0===b.indexOf(e)?c.addClass("active"):void 0})},e(f,d.path()),a.$watch(g,function(a,b){return a!==b?e(f,d.path()):void 0})}]}}]).directive("toggleOffCanvas",[function(){return{restrict:"A",link:function(a,b){return b.on("click",function(){return $("#app").toggleClass("on-canvas")})}}}]).directive("slimScroll",[function(){return{restrict:"A",link:function(a,b,c){return b.slimScroll({height:c.scrollHeight||"100%"})}}}]).directive("goBack",[function(){return{restrict:"A",controller:["$scope","$element","$window",function(a,b,c){return b.on("click",function(){return c.history.back()})}]}}]).directive("customBackground",[function(){return{restrict:"A",controller:["$scope","$element","$location",function(a,b,c){var d=function(){return c.path()},e=function(a){switch(b.removeClass("body-special"),a){case"/login":b.addClass("body-special")}};e(c.path()),a.$watch(d,function(a,b){a!=b&&e(c.path())})}]}}]),angular.module("app.toast",[]).factory("toastService",["$rootScope","$timeout",function(a,b){return{errToast:function(c){var d=(new Date).getTime();a.errFlag=d,a.errMsg=c,b(function(){d==a.errFlag&&(a.errMsg=null)},3e3)}}}]),angular.module("app.utils",[]).factory("utils",["$rootScope","$timeout",function(a,b){return{}}]),angular.module("app.login",["app.config"]),angular.module("app.sell",["app.config"]),angular.module("app.login").factory("loginService",["$http","config",function(a,b){var c=b.baseUrl,d=null;return{login:function(b,e,f){var g=c+"/login";a.post(g,{userName:b,password:e}).success(function(a){200==a.statusCode?(d=a.data,localStorage.user=JSON.stringify(d),f(null,d)):(d=null,localStorage.removeItem("user"),f(a.message))}).error(function(a){d=null,localStorage.removeItem("user"),f(a)})},getUser:function(){return d?d:(localStorage.user&&(d=JSON.parse(localStorage.user)),d)},logout:function(){d=null,localStorage.removeItem("user")},getToken:function(){return d?d.token:""}}}]),angular.module("app.sell").factory("sellService",["$http","config",function(a,b){b.baseUrl}]),angular.module("app.login").controller("loginCtrl",["$location","$scope","loginService",function(a,b,c){var d=c.getUser();return d?void a.path("/profile"):(b.loading=!1,void(b.login=function(){return b.errMsg=null,b.userName?b.password?(b.loading=!0,void c.login(b.userName,b.password,function(c,d){return b.loading=!1,c?void(b.errMsg="用户名或密码错误"):d?(b.errMsg=null,void a.path("/profile")):void(b.errMsg="登录失败")})):void(b.errMsg="请输入密码"):void(b.errMsg="请输入用户名")}))}]),angular.module("app.sell").controller("newOrderCtrl",["$location","$scope","$interval","$modal","sellService",function(a,b,c,d,e){b.dt=new Date,c(function(){b.dt=new Date},1e3),b.shortcuts=[{category:"纯果汁",products:[{barcode:"0001",name:"西瓜汁",price:18},{barcode:"0002",name:"雪梨汁",price:18},{barcode:"0003",name:"苹果汁",price:18},{barcode:"0004",name:"菠萝汁",price:18},{barcode:"0005",name:"哈密瓜汁",price:22},{barcode:"0006",name:"鲜橙汁",price:28},{barcode:"0007",name:"玫瑰火龙果汁",price:32},{barcode:"0008",name:"芒果汁",price:38},{barcode:"0009",name:"西柚汁",price:38}]},{category:"鸡尾蔬果汁",products:[{barcode:"1001",name:"窈窕美莓",price:18},{barcode:"1002",name:"活力满分",price:18}]},{category:"组合果汁",products:[{barcode:"2001",name:"窈窕美莓",price:18},{barcode:"2002",name:"活力满分",price:18}]},{category:"果昔",products:[{barcode:"3001",name:"窈窕美莓",price:18},{barcode:"3002",name:"活力满分",price:18}]},{category:"代餐饮",products:[{barcode:"4001",name:"窈窕美莓",price:18},{barcode:"4002",name:"活力满分",price:18}]}],b.employee={name:"赵铁柱"},b.selectedProducts=[],b.addProduct=function(a){for(var c=0;c<b.selectedProducts.length;c++){var d=b.selectedProducts[c];if(a.barcode==d.barcode)return void(d.quantity+=1)}var e={};e.seq=b.selectedProducts.length+1,e.barcode=a.barcode,e.name=a.name,e.price=a.price,e.quantity=1,b.selectedProducts.push(e)},b.calculateTotalPrice=function(){for(var a=0,c=0;c<b.selectedProducts.length;c++){var d=b.selectedProducts[c],e=parseInt(d.price)*parseInt(d.quantity);a+=e}return a},b.chooseMember=function(){var a=d.open({templateUrl:"partials/sell/choose-member.html",controller:"chooseMemberCtrl",backdrop:"static",resolve:{product:function(){return""}}});a.result.then(function(a){b.member=a})}}]).controller("chooseMemberCtrl",["$scope","$modalInstance",function(a,b){a.cancel=function(){b.dismiss("cancel")},a.ok=function(){b.close({name:"张三",phone:13888888888})}}]);var app=angular.module("app",["ngRoute","ngTouch","ngAnimate","ui.bootstrap","ui.tree","app.templates","app.directives","app.login","app.sell"]);app.config(["$routeProvider",function(a){a.when("/",{redirectTo:"/login"}).when("/login",{templateUrl:"partials/login/login.html",controller:"loginCtrl"}).when("/profile",{templateUrl:"partials/home/profile.html"}).when("/products/category",{templateUrl:"partials/products/category.html"}).when("/products/product",{templateUrl:"partials/products/product.html"}).when("/sell/new",{templateUrl:"partials/sell/new.html",controller:"newOrderCtrl"}).when("/404",{templateUrl:"partials/common/404.html"}).otherwise({redirectTo:"/404"})}]),app.factory("authInterceptor",["$rootScope","$q","$location",function(a,b,c){return{request:function(a){if(c.path().indexOf("/login")>=0)return a;if(!localStorage.user)return c.path("/login"),a;var b=JSON.parse(localStorage.user);if(!b||!b.token)return c.path("/login"),a;var d=b.token;return a.headers=a.headers||{},a.headers.token=d,a},response:function(a){return 401===a.status&&c.path("/login"),a||b.when(a)}}}]),app.config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]),app.controller("appCtrl",["$scope","$location","loginService",function(a,b,c){a.hideNav=function(){$("#app").removeClass("on-canvas")},a.isSpecificPage=function(){return b.path().indexOf("/login")>=0},a.logout=function(){c.logout(),b.path("/login")}}]);